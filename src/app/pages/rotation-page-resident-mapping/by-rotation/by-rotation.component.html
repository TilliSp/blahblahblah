<div class="row main-body">
    <ng-container *ngTemplateOutlet="tableBody"></ng-container>
</div>

<ng-template #fullDataModal let-modal style="z-index: 999999 !important;">
    <div class="modal-content">
        <div class="modal-body">
            <div class="row modal-main-body">
                <ng-container *ngTemplateOutlet="tableBody"></ng-container>   
            </div>
        </div>
    </div><!-- /.modal-content -->
</ng-template>


<!-- template body -->
<ng-template #tableBody>
    <div class="card mb-0">
        <div class="card-body">
            <div class="row">
                <div class="col-md-3">
                    <p class="h5 px-3">Rotations</p>
                    <div class="list-group list-group-fill-success">
                        <div *ngFor="let code of listData.rotationCodes; let i = index">
                            <a [ngClass]="status[i] === true ? 'bg-secondary' : ''" (click)="onSelectRotationCode(code, i)" class="list-group-item list-group-item-action" style="cursor: pointer !important">{{code}}</a>
                        </div>
                        
                    </div>
                </div>
                <div class="col-md-9">
                    <div *ngIf="!isFullscreenMode" class="d-flex flex-row justify-content-end">
                        <button (click)="fullModal(fullDataModal)" type="button" class="btn btn-outline-primary btn-icon waves-effect waves-light my-2"><i class=" ri-fullscreen-fill"></i></button>
                    </div>
                    <div *ngIf="isFullscreenMode" class="d-flex flex-row justify-content-end">
                        <button (click)="closeModal()"type="button" class="btn btn-outline-primary btn-icon waves-effect waves-light my-2"><i class="  ri-close-line
                            "></i></button>
                    </div>
                    <div class="table-responsive table_block">
                        <table class=" table table-nowrap" >
                            <thead class="table-light text-center">
                                <tr>
                                    <th>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" role="switch" 
                                            (change)="onChangeListView()"
                                            id="flexSwitchCheckDefault" [(ngModel)]="isRotationVsTrainee">
                                            <label class="form-check-label mx-2" for="flexSwitchCheckDefault">
                                                <span *ngIf="isRotationVsTrainee">Trainee</span>
                                                <span *ngIf="!isRotationVsTrainee">Faculty</span>
                                            </label>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 1</div>
                                            <div class="block_date">(01/09/2019 - 28/09/2019)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 2</div>
                                            <div class="block_date">(29/09/2019 - 26/10/2019)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 3</div>
                                            <div class="block_date">(27/10/2019 - 23/11/2019)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 4</div>
                                            <div class="block_date">(24/11/2019 - 21/12/2019)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 5</div>
                                            <div class="block_date">(22/12/2019 - 18/01/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 6</div>
                                            <div class="block_date">(19/01/2020 - 15/02/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 7</div>
                                            <div class="block_date">(16/02/2020 - 14/03/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 8</div>
                                            <div class="block_date">(15/03/2020 - 11/04/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 9</div>
                                            <div class="block_date">(12/04/2020 - 09/05/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 10</div>
                                            <div class="block_date"> (10/05/2020 - 06/06/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 11</div>
                                            <div class="block_date">(07/06/2020 - 04/07/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 12</div>
                                            <div class="block_date">(05/07/2020 - 01/08/2020)</div>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="block_box">
                                            <div class="block_name">Block 13</div>
                                            <div class="block_date">(02/08/2020 - 31/08/2020)</div>
                                        </div>
                                    </th>
                                    
                                </tr>
                            </thead>
                            <tbody >
                                <tr *ngFor="let s of studentList">
                                    <td style="text-align:left !important" class="columnName">
                                        <div class="hoverModal bg-light p-3 d-flex flex-column">
                                            <p class="mb-1">Program : {{s.student.program}}</p>
                                            <p class="mb-1">OMSB # : {{s.student.omsbNumber}}</p>
                                            <p class="mb-0">Year : {{s.student.year}}</p>
                                        </div>
                                        <span>{{s.student.name}}</span>
                                    </td>
                                    <td [ngClass]="s?.blockValue[0] != '' ? 'bg-blocked-cell' : ''" (click)="setBlock(s.student.name, 0)"><span>{{s?.blockValue[0]}}</span><i  *ngIf="s?.blockValue[0] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 0)"></i></td>
                                    <td [ngClass]="s?.blockValue[1] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 1)"><span>{{s?.blockValue[1]}}</span><i  *ngIf="s?.blockValue[1] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 1)"></i></td>
                                    <td [ngClass]="s?.blockValue[2] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 2)"><span>{{s?.blockValue[2]}}</span><i  *ngIf="s?.blockValue[2] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 2)"></i></td>
                                    <td [ngClass]="s?.blockValue[3] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 3)"><span>{{s?.blockValue[3]}}</span><i  *ngIf="s?.blockValue[3] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 3)"></i></td>
                                    <td [ngClass]="s?.blockValue[4] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 4)"><span>{{s?.blockValue[4]}}</span><i  *ngIf="s?.blockValue[4] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 4)"></i></td>
                                    <td [ngClass]="s?.blockValue[5] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 5)"><span>{{s?.blockValue[5]}}</span><i  *ngIf="s?.blockValue[5] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 5)"></i></td>
                                    <td [ngClass]="s?.blockValue[6] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 6)"><span>{{s?.blockValue[6]}}</span><i  *ngIf="s?.blockValue[6] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 6)"></i></td>
                                    <td [ngClass]="s?.blockValue[7] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 7)"><span>{{s?.blockValue[7]}}</span><i  *ngIf="s?.blockValue[7] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 7)"></i></td>
                                    <td [ngClass]="s?.blockValue[8] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 8)"><span>{{s?.blockValue[8]}}</span><i  *ngIf="s?.blockValue[8] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 8)"></i></td>
                                    <td [ngClass]="s?.blockValue[9] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 9)"><span>{{s?.blockValue[9]}}</span><i  *ngIf="s?.blockValue[9] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 9)"></i></td>
                                    <td [ngClass]="s?.blockValue[10] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 10)"><span>{{s?.blockValue[10]}}</span><i  *ngIf="s?.blockValue[10] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 10)"></i></td>
                                    <td [ngClass]="s?.blockValue[11] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 11)"><span>{{s?.blockValue[11]}}</span><i  *ngIf="s?.blockValue[11] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 11)"></i></td>
                                    <td [ngClass]="s?.blockValue[12] != '' ? 'bg-blocked-cell' : ''"(click)="setBlock(s.student.name, 12)"><span>{{s?.blockValue[12]}}</span><i  *ngIf="s?.blockValue[12] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(s.student.name, 12)"></i></td>
                                </tr>
                                <tr *ngFor="let f of facultyList">
                                    <td style="text-align:left !important" class="columnName">
                                        <!-- <div class="hoverModal bg-light p-3 d-flex flex-column">
                                            <p class="mb-1">Program : {{s.student.program}}</p>
                                            <p class="mb-1">OMSB # : {{s.student.omsbNumber}}</p>
                                            <p class="mb-0">Year : {{s.student.year}}</p>
                                        </div> -->
                                        <span>{{f.faculty.name}}</span>
                                    </td>
                                    <td (click)="setBlock(f.faculty.name, 0)"><span>{{f?.blockValue[0]}}</span><i  *ngIf="f?.blockValue[0] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 0)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 1)"><span>{{f?.blockValue[1]}}</span><i  *ngIf="f?.blockValue[1] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 1)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 2)"><span>{{f?.blockValue[2]}}</span><i  *ngIf="f?.blockValue[2] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 2)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 3)"><span>{{f?.blockValue[3]}}</span><i  *ngIf="f?.blockValue[3] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 3)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 4)"><span>{{f?.blockValue[4]}}</span><i  *ngIf="f?.blockValue[4] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 4)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 5)"><span>{{f?.blockValue[5]}}</span><i  *ngIf="f?.blockValue[5] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 5)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 6)"><span>{{f?.blockValue[6]}}</span><i  *ngIf="f?.blockValue[6] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 6)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 7)"><span>{{f?.blockValue[7]}}</span><i  *ngIf="f?.blockValue[7] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 7)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 8)"><span>{{f?.blockValue[8]}}</span><i  *ngIf="f?.blockValue[8] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 8)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 9)"><span>{{f?.blockValue[9]}}</span><i  *ngIf="f?.blockValue[9] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 9)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 10)"><span>{{f?.blockValue[10]}}</span><i  *ngIf="f?.blockValue[10] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 10)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 11)"><span>{{f?.blockValue[11]}}</span><i  *ngIf="f?.blockValue[11] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 11)"></i></td>
                                    <td (click)="setBlock(f.faculty.name, 12)"><span>{{f?.blockValue[12]}}</span><i  *ngIf="f?.blockValue[12] != ''" class="ri-delete-bin-5-line text-danger mx-2" (click)="setBlock(f.faculty.name, 12)"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
            </div>
            
        </div>
    </div>
</ng-template>